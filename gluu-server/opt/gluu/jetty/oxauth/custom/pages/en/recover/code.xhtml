<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                template="/WEB-INF/incl/layouts/GCWeb.xhtml">

  <f:metadata>
    <f:viewAction action="#{authenticator.prepareAuthenticationForStep}" />
  </f:metadata>

  <ui:param name="otherLanguage" value="recuperer/code" />

  <ui:define name="name">
    <ui:include src="/WEB-INF/incl/content/default/name-#{language.localeCode}.xhtml" />
  </ui:define>

  <ui:define name="help">
    <ui:include src="/WEB-INF/incl/content/default/help-#{language.localeCode}.xhtml" />
  </ui:define>
  
  <ui:define name="content">
    <h2>Recover your profile</h2>
    <p>Enter the recovery code you recorded when you created your account.</p>
    <p>When you created your account you were given a recovery code and asked to write it down somewhere secure. You will need to use that code now. </p>
    <h:messages style="color:red;" />
    <h:form id="loginForm" class="form-horizontal">
      <h:inputHidden id="action" styleClass="form-control" autocomplete="off" />
      <label for="recoverycode" class="required">
        <span class="field-name">Recovery code</span>
        <strong class="required">(required)</strong>
      </label>
      <ul class="list-unstyled">
        <h:inputText placeholder="Recovery Code" id="recoveryCode1" size="4" maxlength="4" autocomplete="off" styleClass="display: inline-block" />
        -
        <h:inputText placeholder="Recovery Code" id="recoveryCode2" size="4" maxlength="4" autocomplete="off" styleClass="display: inline-block" />
        -
        <h:inputText placeholder="Recovery Code" id="recoveryCode3" size="4" maxlength="4" autocomplete="off" styleClass="display: inline-block" />
        <li>
          <details>
            <summary>How do I get this code?</summary>
            <p>When you created your account you were given a recovery code with instructions to write it down and store it safely. If your smartphone or hardware USB token is lost or damaged the ONLY way to recover your profile account is via this recovery code.</p>
            <p>If you have lost your recovery code:</p>
            <ul>
              <li>Your account cannot be recovered. If you have made requests you will be unable to access them or retrieve any reply packages electronically through ATIP Online.</li>
              <li>You must contact the institution(s) to which you made the request(s) directly and arrange for reply delivery in some other way.</li>
              <li>You may make a new account however if you have pending requests you cannot arrange to deliver them to the new account.</li>
            </ul>
          </details>
        </li>
      </ul>
      <nav class="mrgn-bttm-lg" role="navigation">
        <h2 class="wb-inv">Document navigation</h2>
        <ul class="pager">
          <br />
          <li class="pull-left">
            <h:commandButton id="cancelButton" styleClass="btn btn-default" role="button" value="Cancel Recovery" action="#{authenticator.authenticate}" onclick="fillInCancel()" />
          </li>
          <li class="pull-right">
            <h:commandButton id="loginButton1" styleClass="btn btn-primary" role="button" value="Continue" action="#{authenticator.authenticate}" />
          </li>
        </ul>
      </nav>
    </h:form>
  </ui:define>

  <ui:define name="scripts">
    <script type="text/x-javascript">
      function fillInCancel(){
        document.getElementById("loginForm:action").value = "cancel";
      }
  </script>

  </ui:define>
</ui:composition>